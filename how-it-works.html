<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2196F3">
    <title>ä»•çµ„ã¿ã®è§£èª¬ - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³QTH</title>
    <meta name="description" content="ã‚ªãƒ•ãƒ©ã‚¤ãƒ³QTHã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¨ä»•çµ„ã¿ã‚’è©³ã—ãè§£èª¬ã€‚ã‚°ãƒªãƒƒãƒ‰ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆMaidenhead Locator Systemï¼‰ã€æ¨™é«˜å–å¾—ã€é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®æŠ€è¡“çš„ãªè©³ç´°ã€‚">
    <link rel="stylesheet" href="styles.css">
    <style>
        .content-wrapper {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .content-wrapper h2 {
            color: #2196F3;
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 2px solid #2196F3;
            padding-bottom: 10px;
        }
        .content-wrapper h3 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .content-wrapper p {
            line-height: 1.8;
            margin-bottom: 15px;
        }
        .content-wrapper code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .content-wrapper pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .formula {
            background: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196F3;
            margin: 15px 0;
            border-radius: 4px;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #2196F3;
            text-decoration: none;
            font-weight: bold;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š ä»•çµ„ã¿ã®è§£èª¬</h1>
            <p class="subtitle">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³QTHã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯</p>
        </header>

        <main>
            <div class="content-wrapper">
                <h2>ğŸŒ ã‚°ãƒªãƒƒãƒ‰ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆMaidenhead Locator Systemï¼‰</h2>

                <h3>æ¦‚è¦</h3>
                <p>
                    ã‚°ãƒªãƒƒãƒ‰ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ã¯ã€åœ°çƒä¸Šã®ä½ç½®ã‚’è¡¨ã™ä¸–ç•Œå…±é€šã®åº§æ¨™ç³»ã§ã™ã€‚
                    Maidenhead Locator System ã¨ã‚‚å‘¼ã°ã‚Œã€ã‚¢ãƒãƒãƒ¥ã‚¢ç„¡ç·šã§åºƒãä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
                    ç·¯åº¦ãƒ»çµŒåº¦ã‚’è‹±æ•°å­—6æ¡ï¼ˆã¾ãŸã¯ãã‚Œä»¥ä¸Šï¼‰ã§è¡¨ç¾ã—ã¾ã™ã€‚
                </p>

                <h3>è¨ˆç®—æ–¹æ³•</h3>
                <p>6æ¡ã®ã‚°ãƒªãƒƒãƒ‰ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆä¾‹ï¼šPM95vrï¼‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨ˆç®—ã•ã‚Œã¾ã™ï¼š</p>

                <div class="formula">
                    <strong>1. Fieldï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰- æœ€åˆã®2æ–‡å­—ï¼ˆå¤§æ–‡å­—ï¼‰</strong><br>
                    çµŒåº¦: -180Â° ã€œ +180Â° ã‚’ 20Â° ã”ã¨ã«18åˆ†å‰² â†’ A-R<br>
                    ç·¯åº¦: -90Â° ã€œ +90Â° ã‚’ 10Â° ã”ã¨ã«18åˆ†å‰² â†’ A-R<br>
                    <br>
                    ä¾‹: çµŒåº¦139.69Â° â†’ Pã€ç·¯åº¦35.68Â° â†’ M<br>
                    çµæœ: <strong>PM</strong>
                </div>

                <div class="formula">
                    <strong>2. Squareï¼ˆã‚¹ã‚¯ã‚¨ã‚¢ï¼‰- æ¬¡ã®2æ–‡å­—ï¼ˆæ•°å­—ï¼‰</strong><br>
                    Fieldã‚’ã•ã‚‰ã« 10Ã—10 ã«åˆ†å‰² â†’ 0-9<br>
                    çµŒåº¦: 2Â° ã”ã¨ã€ç·¯åº¦: 1Â° ã”ã¨<br>
                    <br>
                    ä¾‹: çµŒåº¦139.69Â° â†’ 9ã€ç·¯åº¦35.68Â° â†’ 5<br>
                    çµæœ: <strong>95</strong>
                </div>

                <div class="formula">
                    <strong>3. Subsquareï¼ˆã‚µãƒ–ã‚¹ã‚¯ã‚¨ã‚¢ï¼‰- æœ€å¾Œã®2æ–‡å­—ï¼ˆå°æ–‡å­—ï¼‰</strong><br>
                    Squareã‚’ã•ã‚‰ã« 24Ã—24 ã«åˆ†å‰² â†’ a-x<br>
                    çµŒåº¦: 5åˆ† ã”ã¨ã€ç·¯åº¦: 2.5åˆ† ã”ã¨<br>
                    <br>
                    ä¾‹: çµŒåº¦139.69Â° â†’ vã€ç·¯åº¦35.68Â° â†’ r<br>
                    çµæœ: <strong>vr</strong>
                </div>

                <p>æœ€çµ‚çš„ãªã‚°ãƒªãƒƒãƒ‰ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼: <strong>PM95vr</strong></p>

                <h3>JavaScriptã‚³ãƒ¼ãƒ‰ä¾‹</h3>
                <pre><code>function calculateGridLocator(lat, lon) {
    // çµŒåº¦ã‚’0-360ã®ç¯„å›²ã«å¤‰æ›
    let adjustedLon = lon + 180;
    // ç·¯åº¦ã‚’0-180ã®ç¯„å›²ã«å¤‰æ›
    let adjustedLat = lat + 90;

    // Field (A-R)
    const fieldLon = String.fromCharCode(65 + Math.floor(adjustedLon / 20));
    const fieldLat = String.fromCharCode(65 + Math.floor(adjustedLat / 10));

    // Square (0-9)
    adjustedLon = adjustedLon % 20;
    adjustedLat = adjustedLat % 10;
    const squareLon = Math.floor(adjustedLon / 2);
    const squareLat = Math.floor(adjustedLat / 1);

    // Subsquare (a-x)
    adjustedLon = (adjustedLon % 2) * 60;
    adjustedLat = (adjustedLat % 1) * 60;
    const subsquareLon = String.fromCharCode(97 + Math.floor(adjustedLon / 5));
    const subsquareLat = String.fromCharCode(97 + Math.floor(adjustedLat / 2.5));

    return `${fieldLon}${fieldLat}${squareLon}${squareLat}${subsquareLon}${subsquareLat}`;
}</code></pre>

                <h2>â›°ï¸ æ¨™é«˜ã®å–å¾—</h2>

                <h3>2æ®µéšã®å–å¾—æ–¹æ³•</h3>
                <p>æ¨™é«˜ã¯ä»¥ä¸‹ã®2ã¤ã®æ–¹æ³•ã§å–å¾—ã•ã‚Œã¾ã™ï¼š</p>

                <div class="formula">
                    <strong>1. GPSæ¨™é«˜ï¼ˆå³åº§ã«è¡¨ç¤ºï¼‰</strong><br>
                    Geolocation API ã® <code>altitude</code> ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰å–å¾—<br>
                    ç²¾åº¦: ä½ã€œä¸­ï¼ˆÂ±10mã€œ50mç¨‹åº¦ï¼‰<br>
                    åˆ©ç‚¹: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä½¿ç”¨å¯èƒ½ã€å³åº§ã«è¡¨ç¤º
                </div>

                <div class="formula">
                    <strong>2. å›½åœŸåœ°ç†é™¢æ¨™é«˜APIï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ï¼‰</strong><br>
                    URL: <code>https://cyberjapandata2.gsi.go.jp/general/dem/scripts/getelevation.php</code><br>
                    ç²¾åº¦: é«˜ï¼ˆÂ±æ•°mç¨‹åº¦ï¼‰<br>
                    åˆ©ç‚¹: éå¸¸ã«æ­£ç¢ºã€ç„¡æ–™ã§ä½¿ç”¨å¯èƒ½
                </div>

                <h3>APIä½¿ç”¨ä¾‹</h3>
                <pre><code>async function getElevation(lat, lon) {
    const url = `https://cyberjapandata2.gsi.go.jp/general/dem/scripts/getelevation.php?lon=${lon}&lat=${lat}&outtype=JSON`;
    const response = await fetch(url);
    const data = await response.json();
    return Math.round(data.elevation);
}</code></pre>

                <h2>ğŸ—ºï¸ éƒ½é“åºœçœŒãƒ»å¸‚åŒºç”ºæ‘ã®å–å¾—</h2>

                <h3>é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆReverse Geocodingï¼‰</h3>
                <p>
                    ç·¯åº¦ãƒ»çµŒåº¦ã‹ã‚‰ä½æ‰€ã‚’å–å¾—ã™ã‚‹æŠ€è¡“ã‚’ã€Œé€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ã¨å‘¼ã³ã¾ã™ã€‚
                    æœ¬ã‚¢ãƒ—ãƒªã§ã¯ OpenStreetMap ã® Nominatim API ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
                </p>

                <div class="formula">
                    <strong>OpenStreetMap Nominatim API</strong><br>
                    URL: <code>https://nominatim.openstreetmap.org/reverse</code><br>
                    åˆ©ç‚¹: ç„¡æ–™ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã€æ—¥æœ¬èªå¯¾å¿œ<br>
                    åˆ¶é™: åˆ©ç”¨è¦ç´„ã«å¾“ã„ã€1ç§’ã«1ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§
                </div>

                <h3>APIä½¿ç”¨ä¾‹</h3>
                <pre><code>async function reverseGeocode(lat, lon) {
    const url = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&accept-language=ja`;
    const response = await fetch(url, {
        headers: {
            'User-Agent': 'OfflineQTH/1.0'
        }
    });
    const data = await response.json();

    if (data.address) {
        return {
            prefecture: data.address.state || data.address.province,
            city: data.address.city || data.address.town || data.address.village
        };
    }
}</code></pre>

                <h2>ğŸ“ JCC/JCG ã‚³ãƒ¼ãƒ‰</h2>

                <h3>æ¦‚è¦</h3>
                <p>
                    <strong>JCCï¼ˆJapan Century Cityï¼‰</strong>ã¨<strong>JCGï¼ˆJapan Century Gunï¼‰</strong>ã¯ã€
                    æ—¥æœ¬å›½å†…ã®å¸‚åŒºç”ºæ‘ãƒ»éƒ¡ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸè­˜åˆ¥ç•ªå·ã§ã™ã€‚
                    ã‚¢ãƒãƒãƒ¥ã‚¢ç„¡ç·šã®ã‚¢ãƒ¯ãƒ¼ãƒ‰ï¼ˆè³ï¼‰å–å¾—ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
                </p>

                <h3>åˆ¤å®šæ–¹æ³•</h3>
                <p>ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã§JCC/JCGã‚’åˆ¤å®šã—ã¦ã„ã¾ã™ï¼š</p>

                <div class="formula">
                    <strong>æœ€è¿‘å‚æ¢ç´¢ï¼ˆNearest Neighborï¼‰</strong><br>
                    1. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆlocation-data.jsonï¼‰ã«ç™»éŒ²ã•ã‚ŒãŸåœ°ç‚¹ã¨ã®è·é›¢ã‚’è¨ˆç®—<br>
                    2. æœ€ã‚‚è¿‘ã„åœ°ç‚¹ã®JCC/JCGã‚³ãƒ¼ãƒ‰ã‚’è¿”ã™<br>
                    <br>
                    ç²¾åº¦å‘ä¸Šã®ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ‹¡å……ãŒå¿…è¦ã§ã™ã€‚
                </div>

                <h2>ğŸ’¾ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œã®ä»•çµ„ã¿</h2>

                <h3>Service Worker</h3>
                <p>
                    PWAï¼ˆProgressive Web Appï¼‰ã® Service Worker ã‚’ä½¿ç”¨ã—ã¦ã€
                    ã‚¢ãƒ—ãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚
                </p>

                <div class="formula">
                    <strong>ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥</strong><br>
                    1. åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥<br>
                    2. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰èª­ã¿è¾¼ã¿<br>
                    3. ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã¯ API ã§æ­£ç¢ºãªæƒ…å ±ã‚’å–å¾—
                </div>

                <h3>ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼</h3>
                <p>
                    ã‚°ãƒªãƒƒãƒ‰ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ã¯ãƒ­ãƒ¼ã‚«ãƒ«è¨ˆç®—ã®ãŸã‚å®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œã—ã¾ã™ãŒã€
                    æ¨™é«˜ã¨ä½æ‰€ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã«ã‚ˆã‚Šæ­£ç¢ºãªæƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
                </p>

                <h2>ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h2>
                <ul>
                    <li><strong>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:</strong> Pure JavaScriptï¼ˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¸è¦ï¼‰</li>
                    <li><strong>PWA:</strong> Service Workerã€manifest.json</li>
                    <li><strong>ä½ç½®æƒ…å ±:</strong> Geolocation API</li>
                    <li><strong>æ¨™é«˜API:</strong> å›½åœŸåœ°ç†é™¢</li>
                    <li><strong>ä½æ‰€API:</strong> OpenStreetMap Nominatim</li>
                    <li><strong>ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°:</strong> GitHub Pages</li>
                </ul>

                <h2>ğŸ“– å‚è€ƒè³‡æ–™</h2>
                <ul>
                    <li><a href="https://en.wikipedia.org/wiki/Maidenhead_Locator_System" target="_blank">Maidenhead Locator System - Wikipedia</a></li>
                    <li><a href="https://maps.gsi.go.jp/development/api.html" target="_blank">å›½åœŸåœ°ç†é™¢ APIä»•æ§˜</a></li>
                    <li><a href="https://nominatim.org/release-docs/latest/api/Reverse/" target="_blank">Nominatim Reverse Geocoding API</a></li>
                    <li><a href="https://www.jarl.org/" target="_blank">JARL - ä¸€èˆ¬ç¤¾å›£æ³•äººæ—¥æœ¬ã‚¢ãƒãƒãƒ¥ã‚¢ç„¡ç·šé€£ç›Ÿ</a></li>
                </ul>

                <a href="index.html" class="back-link">â† ã‚¢ãƒ—ãƒªã«æˆ»ã‚‹</a>
            </div>
        </main>

        <footer>
            <p class="version" style="color: white;">
                v1.0.0 | Created by <a href="https://x.com/je1wfv" target="_blank" rel="noopener" style="color: white; text-decoration: none; font-weight: bold;">JE1WFV</a>
            </p>
            <p style="margin-top: 5px; font-size: 0.9em; color: white;">
                <a href="https://github.com/matsubo/offline-qth" target="_blank" rel="noopener" style="color: rgba(255,255,255,0.8); text-decoration: none;">
                    GitHub
                </a> |
                <a href="index.html" style="color: rgba(255,255,255,0.8); text-decoration: none;">
                    ã‚¢ãƒ—ãƒªã«æˆ»ã‚‹
                </a>
            </p>
        </footer>
    </div>
</body>
</html>
